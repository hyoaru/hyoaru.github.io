const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Tooltip-BAxPWbMb-ERTzvhCU.js","assets/index-BaYbi4R4.js","assets/index-ePELpF_G.css"])))=>i.map(i=>d[i]);
import{Ct as e,Ut as t,t as n}from"./index-BaYbi4R4.js";const r=6e4,i=36e5,a=3600*24;a*7,a*365.2425;const o=Symbol.for(`constructDateFrom`);function s(e,t){return typeof e==`function`?e(t):e&&typeof e==`object`&&o in e?e[o](t):e instanceof Date?new e.constructor(t):new Date(t)}function c(e,t){return s(t||e,e)}function l(e,t,n){let r=c(e,n?.in);return isNaN(t)?s(n?.in||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function u(e){let t=c(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),e-+n}function d(e,...t){let n=s.bind(null,e||t.find(e=>typeof e==`object`));return t.map(n)}function f(e,t){let n=c(e,t?.in);return n.setHours(0,0,0,0),n}function p(e,t,n){let[r,i]=d(n?.in,e,t),a=f(r),o=f(i),s=+a-u(a),c=+o-u(o);return Math.round((s-c)/864e5)}function m(e,t,n){return l(e,t*7,n)}function h(e){return e instanceof Date||typeof e==`object`&&Object.prototype.toString.call(e)===`[object Date]`}function g(e){return!(!h(e)&&typeof e!=`number`||isNaN(+c(e)))}function _(e,t){let[n,r]=d(e,t.start,t.end);return{start:n,end:r}}function v(e,t){let{start:n,end:r}=_(t?.in,e),i=+n>+r,a=i?+n:+r,o=i?r:n;o.setHours(0,0,0,0);let c=t?.step??1;if(!c)return[];c<0&&(c=-c,i=!i);let l=[];for(;+o<=a;)l.push(s(n,o)),o.setDate(o.getDate()+c),o.setHours(0,0,0,0);return i?l.reverse():l}function y(e,t){return(e<0?`-`:``)+Math.abs(e).toString().padStart(t,`0`)}function b(e,t){let n=c(e,t?.in);if(isNaN(+n))throw RangeError(`Invalid time value`);let r=t?.format??`extended`,i=t?.representation??`complete`,a=``,o=``,s=r===`extended`?`-`:``,l=r===`extended`?`:`:``;if(i!==`time`){let e=y(n.getDate(),2),t=y(n.getMonth()+1,2);a=`${y(n.getFullYear(),4)}${s}${t}${s}${e}`}if(i!==`date`){let e=n.getTimezoneOffset();if(e!==0){let t=Math.abs(e),n=y(Math.trunc(t/60),2),r=y(t%60,2);o=`${e<0?`+`:`-`}${n}:${r}`}else o=`Z`;let t=y(n.getHours(),2),r=y(n.getMinutes(),2),i=y(n.getSeconds(),2),s=a===``?``:`T`,c=[t,r,i].join(l);a=`${a}${s}${c}${o}`}return a}function x(e,t){return c(e,t?.in).getDay()}function S(e,t){return c(e,t?.in).getMonth()}function ee(e,t){return c(e,t?.in).getFullYear()}function C(e,t,n){let r=t-x(e,n);return r<=0&&(r+=7),l(e,r,n)}function w(e,t){let n=()=>s(t?.in,NaN),r=t?.additionalDigits??2,i=O(e),a;if(i.date){let e=ne(i.date,r);a=k(e.restDateString,e.year)}if(!a||isNaN(+a))return n();let o=+a,l=0,u;if(i.time&&(l=j(i.time),isNaN(l)))return n();if(i.timezone){if(u=N(i.timezone),isNaN(u))return n()}else{let e=new Date(o+l),n=c(0,t?.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return c(o+l+u,t?.in)}var T={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},E=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,D=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,te=/^([+-])(\d{2})(?::?(\d{2}))?$/;function O(e){let t={},n=e.split(T.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],T.timeZoneDelimiter.test(t.date)&&(t.date=e.split(T.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){let e=T.timezone.exec(r);e?(t.time=r.replace(e[1],``),t.timezone=e[1]):t.time=r}return t}function ne(e,t){let n=RegExp(`^(?:(\\d{4}|[+-]\\d{`+(4+t)+`})|(\\d{2}|[+-]\\d{`+(2+t)+`})$)`),r=e.match(n);if(!r)return{year:NaN,restDateString:``};let i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function k(e,t){if(t===null)return new Date(NaN);let n=e.match(E);if(!n)return new Date(NaN);let r=!!n[4],i=A(n[1]),a=A(n[2])-1,o=A(n[3]),s=A(n[4]),c=A(n[5])-1;if(r)return re(t,s,c)?P(t,s,c):new Date(NaN);{let e=new Date(0);return!L(t,a,o)||!R(t,i)?new Date(NaN):(e.setUTCFullYear(t,a,Math.max(i,o)),e)}}function A(e){return e?parseInt(e):1}function j(e){let t=e.match(D);if(!t)return NaN;let n=M(t[1]),a=M(t[2]),o=M(t[3]);return z(n,a,o)?n*i+a*r+o*1e3:NaN}function M(e){return e&&parseFloat(e.replace(`,`,`.`))||0}function N(e){if(e===`Z`)return 0;let t=e.match(te);if(!t)return 0;let n=t[1]===`+`?-1:1,a=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return B(a,o)?n*(a*i+o*r):NaN}function P(e,t,n){let r=new Date(0);r.setUTCFullYear(e,0,4);let i=r.getUTCDay()||7,a=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}var F=[31,null,31,30,31,30,31,31,30,31,30,31];function I(e){return e%400==0||e%4==0&&e%100!=0}function L(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(F[t]||(I(e)?29:28))}function R(e,t){return t>=1&&t<=(I(e)?366:365)}function re(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function z(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function B(e,t){return t>=0&&t<=59}function ie(e,t,n){return m(e,-t,n)}var V=t(),H=e(),U=`react-activity-calendar`,W=8,G=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],ae={months:G,weekdays:[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],totalCount:`{{count}} activities in {{year}}`,legend:{less:`Less`,more:`More`}},K=`(prefers-color-scheme: dark)`;function oe(){let[e,t]=(0,V.useState)(()=>typeof window>`u`?`light`:window.matchMedia(K).matches?`dark`:`light`),n=e=>{t(e.matches?`dark`:`light`)};return(0,V.useEffect)(()=>{let e=window.matchMedia(K);return t(e.matches?`dark`:`light`),e.addEventListener(`change`,n),()=>{e.removeEventListener(`change`,n)}},[]),e}var q=`${U}--loading-animation`;function se(e,t){let[n,r]=(0,V.useState)(!1);return(0,V.useEffect)(()=>{let n=`oklab(from ${e} l a b)`,i=t===`light`?`oklab(from ${e} calc(l * 0.96) a b)`:`oklab(from ${e} calc(l * 1.08) a b)`,a=document.createElement(`style`);a.innerHTML=`
      @keyframes ${q} {
        0% {
          fill: ${n};
        }
        50% {
          fill: ${i};
        }
        100% {
          fill: ${n};
        }
      }
    `;let o=()=>{r(!0)};return document.head.appendChild(a),a.addEventListener(`load`,o),()=>{document.head.removeChild(a),a.removeEventListener(`load`,o),r(!1)}},[e,t]),n}var J=`(prefers-reduced-motion: reduce)`;function ce(){let[e,t]=(0,V.useState)(()=>typeof window>`u`?!0:window.matchMedia(J).matches);return(0,V.useEffect)(()=>{let e=window.matchMedia(J);t(e.matches);let n=e=>{t(e.matches)};return e.addEventListener(`change`,n),()=>{e.removeEventListener(`change`,n)}},[]),e}function le(e,t){if(e.length===0)throw Error(`Activity data must not be empty.`);for(let{date:n,level:r,count:i}of e){if(!g(w(n)))throw Error(`Activity date '${n}' is not a valid ISO 8601 date string.`);if(i<0)throw RangeError(`Activity count must not be negative, found ${i}.`);if(r<0||r>t)throw RangeError(`Activity level ${r} for ${n} is out of range. It must be between 0 and ${t}.`)}}function ue(e,t=0){let n=de(e),r=n[0],i=w(r.date),a=x(i)===t?i:ie(C(i,t),1),o=[...Array(p(i,a)).fill(void 0),...n];return X(Math.ceil(o.length/7)).map(e=>o.slice(e*7,e*7+7))}function de(e){let t=new Map(e.map(e=>[e.date,e])),n=e[0],r=e[e.length-1];return v({start:w(n.date),end:w(r.date)}).map(e=>{let n=b(e,{representation:`date`});return t.has(n)?t.get(n):{date:n,count:0,level:0}})}function Y(e){return`${U}__${e}`}function X(e){return[...Array(e).keys()]}function fe(){let e=new Date().getFullYear();return v({start:new Date(e,0,1),end:new Date(e,11,31)}).map(e=>({date:b(e,{representation:`date`}),count:0,level:0}))}function pe(e,t=G){return e.reduce((e,n,r)=>{let i=n.find(e=>e!==void 0);if(!i)throw Error(`Unexpected error: Week ${r+1} is empty.`);let a=t[S(w(i.date))];if(!a){let e=new Date(i.date).toLocaleString(`en-US`,{month:`short`});throw Error(`Unexpected error: undefined month label for ${e}.`)}let o=e[e.length-1];return r===0||o?.label!==a?[...e,{weekIndex:r,label:a}]:e},[]).filter(({weekIndex:t},n,r)=>n===0?r[1]&&r[1].weekIndex-t>=3:n===r.length-1?e.slice(t).length>=3:!0)}function me(e,t,n){if(e.length!==7)throw Error(`Exactly 7 labels, one for each weekday must be passed.`);return e.reduce((e,r,i)=>t.byDayIndex(i)?Math.max(e,Math.ceil(he(r,n).width)):e,0)}function he(e,t){if(typeof document>`u`||typeof window>`u`)return{width:0,height:0};if(t<1)throw RangeError(`fontSize must be positive`);if(e.length===0)return{width:0,height:0};let n=`http://www.w3.org/2000/svg`,r=document.createElementNS(n,`svg`);r.style.position=`absolute`,r.style.visibility=`hidden`,r.style.fontFamily=window.getComputedStyle(document.body).fontFamily,r.style.fontSize=`${t}px`;let i=document.createElementNS(n,`text`);i.textContent=e,r.appendChild(i),document.body.appendChild(r);let a=i.getBBox();return document.body.removeChild(r),{width:a.width,height:a.height}}function ge(e,t){if(!e)return{byDayIndex:()=>!1,shouldShow:!1};if(e===!0)return{byDayIndex:e=>(7+e-t)%7%2!=0,shouldShow:!0};let n=[];for(let t of e){let e=_e[t.toLowerCase()];n[e]=!0}return{byDayIndex:e=>n[e]??!1,shouldShow:e.length>0}}var _e={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};function ve(e,t=5){let n=ye(t);return e?(be(e,t),e.light=e.light??n.light,e.dark=e.dark??n.dark,{light:xe(e.light)?Z(e.light,t):e.light,dark:xe(e.dark)?Z(e.dark,t):e.dark}):n}function ye(e){return{light:Z([`hsl(0, 0%, 92%)`,`hsl(0, 0%, 26%)`],e),dark:Z([`hsl(0, 0%, 22%)`,`hsl(0, 0%, 92%)`],e)}}function be(e,t){let n=`The number of colors is controlled by the "maxLevel" property.`;if(typeof e!=`object`||e.light===void 0&&e.dark===void 0)throw Error(`The theme object must contain at least one of the fields "light" and "dark" with exactly 2 or ${t} colors respectively. ${n}`);if(e.light){let{length:r}=e.light;if(r!==2&&r!==t)throw Error(`theme.light must contain exactly 2 or ${t} colors, ${r} passed. ${n}`);for(let t of e.light)if(typeof window<`u`&&!CSS.supports(`color`,t))throw Error(`Invalid color "${t}" passed. All CSS color formats are accepted.`)}if(e.dark){let{length:r}=e.dark;if(r!==2&&r!==t)throw Error(`theme.dark must contain exactly 2 or ${t} colors, ${r} passed. ${n}`);for(let t of e.dark)if(typeof window<`u`&&!CSS.supports(`color`,t))throw Error(`Invalid color "${t}" passed. All CSS color formats are accepted.`)}}function Z([e,t],n){return X(n).map(r=>{switch(r){case 0:return e;case n-1:return t;default:{let i=r/(n-1)*100;return`color-mix(in oklab, ${t} ${parseFloat(i.toFixed(2))}%, ${e})`}}})}function xe(e){return e.length===2}var Q={container:e=>({width:`max-content`,maxWidth:`100%`,display:`flex`,flexDirection:`column`,gap:`8px`,fontSize:`${e}px`}),scrollContainer:e=>({maxWidth:`100%`,overflowX:`auto`,overflowY:`hidden`,paddingTop:Math.ceil(.1*e)}),calendar:{display:`block`,overflow:`visible`},rect:e=>({stroke:e===`light`?`rgba(0, 0, 0, 0.08)`:`rgba(255, 255, 255, 0.04)`}),footer:{container:{display:`flex`,flexWrap:`wrap`,gap:`4px 16px`,whiteSpace:`nowrap`},legend:{marginLeft:`auto`,display:`flex`,alignItems:`center`,gap:`3px`}}},Se=(0,V.lazy)(()=>n(()=>import(`./Tooltip-BAxPWbMb-ERTzvhCU.js`),__vite__mapDeps([0,1,2])).then(e=>({default:e.Tooltip}))),$=(0,V.forwardRef)(({data:e,blockMargin:t=4,blockRadius:n=2,blockSize:r=12,className:i,colorScheme:a,fontSize:o=14,labels:s,loading:c=!1,maxLevel:l=4,renderBlock:u,renderColorLegend:d,showColorLegend:f=!0,showMonthLabels:p=!0,showTotalCount:m=!0,showWeekdayLabels:h=!1,style:g={},theme:_,tooltips:v={},weekStart:y=0},b)=>{let[x,S]=(0,V.useState)(!1);(0,V.useEffect)(()=>{S(!0)},[]),l=Math.max(1,l);let C=ve(_,l+1),T=oe(),E=a??T,D=C[E],te=se(D[0],E),O=!ce();if(c){if(O&&!te)return null;e=fe()}le(e,l);let ne=e[0],k=ee(w(ne.date)),A=ue(e,y),j=Object.assign({},ae,s),M=p?o+W:0,N=ge(h,y),P=x&&N.shouldShow?me(j.weekdays,N,o)+W:void 0;function F(){return{width:A.length*(r+t)-t,height:M+(r+t)*7-t}}function I(){return A.map((e,i)=>e.map((e,a)=>{if(!e)return null;let o=c&&O?{animation:`${q} 1.75s ease-in-out infinite`,animationDelay:`${i*20+a*20}ms`}:void 0,s=(0,H.jsx)(`rect`,{x:0,y:M+(r+t)*a,width:r,height:r,rx:n,ry:n,fill:D[e.level],"data-date":e.date,"data-level":e.level,style:{...Q.rect(E),...o}}),l=u?u(s,e):s;return(0,H.jsx)(V.Fragment,{children:v.activity?(0,H.jsx)(V.Suspense,{fallback:l,children:(0,H.jsx)(Se,{text:v.activity.text(e),colorScheme:E,placement:v.activity.placement??`top`,hoverRestMs:v.activity.hoverRestMs,offset:v.activity.offset,transitionStyles:v.activity.transitionStyles,withArrow:v.activity.withArrow,children:l})}):l},e.date)})).map((e,n)=>(0,H.jsx)(`g`,{transform:`translate(${(r+t)*n}, 0)`,children:e},n))}function L(){if(!m&&!f)return null;let t=e.reduce((e,t)=>e+t.count,0);return(0,H.jsxs)(`footer`,{className:Y(`footer`),style:{...Q.footer.container,marginLeft:P},children:[c&&(0,H.jsx)(`div`,{children:`\xA0`}),!c&&m&&(0,H.jsx)(`div`,{className:Y(`count`),children:j.totalCount?j.totalCount.replace(`{{count}}`,String(t)).replace(`{{year}}`,String(k)):`${t} activities in ${k}`}),!c&&f&&(0,H.jsxs)(`div`,{className:Y(`legend-colors`),style:Q.footer.legend,children:[(0,H.jsx)(`span`,{style:{marginRight:`0.4em`},children:j.legend.less}),X(l+1).map(e=>{let t=(0,H.jsx)(`svg`,{width:r,height:r,children:(0,H.jsx)(`rect`,{width:r,height:r,fill:D[e],rx:n,ry:n,style:Q.rect(E)})},e),i=d?d(t,e):t;return(0,H.jsx)(V.Fragment,{children:v.colorLegend?(0,H.jsx)(V.Suspense,{fallback:i,children:(0,H.jsx)(Se,{text:v.colorLegend.text(e),colorScheme:E,placement:v.colorLegend.placement??`bottom`,hoverRestMs:v.colorLegend.hoverRestMs,offset:v.colorLegend.offset,transitionStyles:v.colorLegend.transitionStyles,withArrow:v.colorLegend.withArrow,children:i})}):i},e)}),(0,H.jsx)(`span`,{style:{marginLeft:`0.4em`},children:j.legend.more})]})]})}function R(){return N.shouldShow?(0,H.jsx)(`g`,{className:Y(`legend-weekday`),children:X(7).map(e=>{let n=(e+y)%7;return N.byDayIndex(n)?(0,H.jsx)(`text`,{x:-W,y:M+(r+t)*e+r/2,dominantBaseline:`central`,textAnchor:`end`,fill:`currentColor`,children:j.weekdays[n]},e):null})}):null}function re(){return p?(0,H.jsx)(`g`,{className:Y(`legend-month`),children:pe(A,j.months).map(({label:e,weekIndex:n})=>(0,H.jsx)(`text`,{x:(r+t)*n,y:0,dominantBaseline:`hanging`,fill:`currentColor`,children:e},n))}):null}let{width:z,height:B}=F();return(0,H.jsxs)(`article`,{ref:b,className:`${U} ${i??``}`.trim(),style:{...g,...Q.container(o)},children:[(0,H.jsx)(`div`,{className:Y(`scroll-container`),style:Q.scrollContainer(o),children:(0,H.jsxs)(`svg`,{width:z,height:B,viewBox:`0 0 ${z} ${B}`,className:Y(`calendar`),style:{...Q.calendar,marginLeft:P},children:[!c&&R(),!c&&re(),I()]})}),L()]})});$.displayName=`ActivityCalendar`;export{Y as n,$ as t};